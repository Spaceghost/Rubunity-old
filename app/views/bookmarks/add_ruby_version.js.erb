$("input#ruby_version").val("");

var ruby_array = []

$("#ruby-versions p.sosumi").remove();

$("#ruby-versions").children().each(function(){
  ruby_array.push("<span>" + $(this).text() + "</span>");
});

<% params[:ruby_version].split(%r{,\s*}).each do |version| %>
  ruby_array.push("<span><%= version %></span>");
<% end %>

ruby_array = $.unique(ruby_array).reverse();

$("#ruby-versions").empty();
$("#remove-ruby-version-form").find('span').remove();

for (version in ruby_array) {
  $("#ruby-versions").append(ruby_array[version]);
  $("#remove-ruby-version-form").append(ruby_array[version]);
}

$("a#fancybox-close").click();